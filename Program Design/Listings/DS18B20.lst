C51 COMPILER V9.60.7.0   DS18B20                                                           11/07/2025 21:59:45 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE DS18B20
OBJECT MODULE PLACED IN .\Objects\DS18B20.obj
COMPILER INVOKED BY: C:\Software\Keil\Core\C51\BIN\C51.EXE DS18B20.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\DS18B20.lst) OBJECT(.\Objects\DS18B20.obj)

line level    source

   1          #include "DS18B20.h"
   2          
   3          
   4          //18B20函数实现
   5          void DS18B20_Init(void){
   6   1              DS18B20_ConvertT();             //上电先转换一次温度，防止第一次读数据错误
   7   1              Delay(1000);                    //等待转换完成
   8   1      }
   9          //转换温度
  10          void DS18B20_ConvertT(void)
  11          {
  12   1              OneWire_Init();
  13   1              OneWire_SendByte(DS18B20_SKIP_ROM);
  14   1              OneWire_SendByte(DS18B20_CONVERT_T);
  15   1      }
  16          //读取温度
  17          float DS18B20_ReadT(void)
  18          {
  19   1              unsigned char TLSB,TMSB;
  20   1              int Temp;
  21   1              float T;
  22   1              OneWire_Init();
  23   1              OneWire_SendByte(DS18B20_SKIP_ROM);
  24   1              OneWire_SendByte(DS18B20_READ_SCRATCHPAD);
  25   1              TLSB=OneWire_ReceiveByte();
  26   1              TMSB=OneWire_ReceiveByte();
  27   1              Temp=(TMSB<<8)|TLSB;
  28   1              T=Temp/16.0;
  29   1              return T;
  30   1      }
  31          
  32          void Show_Temperature(){
  33   1              DS18B20_ConvertT();     //转换温度
  34   1              T=DS18B20_ReadT();      //读取温度
  35   1              //Delay(500);
  36   1              if(T<0)                         //如果温度小于0
  37   1              {
  38   2                      LCD_ShowChar(1,10,'-'); //显示负号
  39   2                      T=-T;                   //将温度变为正数
  40   2              }
  41   1              else                            //如果温度大于等于0
  42   1              {
  43   2                      LCD_ShowChar(1,10,'+'); //显示正号
  44   2              }
  45   1              LCD_ShowNum(1,11,(unsigned int)T,2);            //显示温度整数部分
  46   1              LCD_ShowChar(1,13,'.');         //显示小数点
  47   1              LCD_ShowNum(1,14,(unsigned int)(T*100)%100,2);//显示温度小数部分
  48   1      }
  49          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    213    ----
   CONSTANT SIZE    =   ----    ----
C51 COMPILER V9.60.7.0   DS18B20                                                           11/07/2025 21:59:45 PAGE 2   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
